
#ifndef __IB_BASE_WRAPPER_HPP__
#define __IB_BASE_WRAPPER_HPP__

/*---------------------------------------------------------------------------*/

#include <QtCore/QAtomicInt>

/*---------------------------------------------------------------------------*/

namespace Tools {
namespace Core {

/*---------------------------------------------------------------------------*/

template< typename _TBase >
class BaseWrapper
	:	public _TBase
{

/*---------------------------------------------------------------------------*/

public:

/*---------------------------------------------------------------------------*/

	BaseWrapper()
		:	m_counter( 0 )
	{}

	virtual ~BaseWrapper() {}

/*---------------------------------------------------------------------------*/

	virtual void addRef()
	{
		m_counter.ref();
	}

	virtual void releaseRef()
	{
		if ( !m_counter.deref() )
			delete this;
	}

/*---------------------------------------------------------------------------*/

private:

/*---------------------------------------------------------------------------*/

	QAtomicInt m_counter;

/*---------------------------------------------------------------------------*/

};

/*---------------------------------------------------------------------------*/

} // namespace Core
} // namespace Tools

/*---------------------------------------------------------------------------*/

#endif // __IB_BASE_WRAPPER_HPP__
